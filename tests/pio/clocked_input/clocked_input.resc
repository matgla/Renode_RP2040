$global.TEST_FILE=$ORIGIN/../../../pico-examples/build/pio/clocked_input/pio_clocked_input.elf

$machine_name="pico_tests"
path add $ORIGIN/../..
include $ORIGIN/../../../initialize_common.resc
machine LoadPlatformDescription $ORIGIN/raspberry_pico_with_redirected_spi.repl
sysbus LoadELF $ORIGIN/../../../b2.elf


sysbus LoadELF $global.TEST_FILE
sysbus.cpu0 VectorTableOffset `sysbus GetSymbolAddress "__VECTOR_TABLE"`
sysbus.cpu1 VectorTableOffset `sysbus GetSymbolAddress "__VECTOR_TABLE"`

showAnalyzer sysbus.uart0

